README.txt
==========

    >>> from zope.interface import alsoProvides
    >>> from collective.atomsyndication.atom import IAtomSyndicationLayer

    >>> app = layer['app']
    >>> portal = layer['portal']
    >>> request = layer['request']

    >>> alsoProvides(request, IAtomSyndicationLayer)

    >>> from Products.CMFPlone.utils import _createObjectByType
    >>> if layer['has_collection']:
    ...     atomic = _createObjectByType(type_name="Collection", 
    ...                                  container=portal, 
    ...                                  id="atomic", 
    ...                                  title=u"Atomic Content", 
    ...                                  description=u"A collection of atomic content.")
    ... else:
    ...     atomic = _createObjectByType(type_name="Topic", 
    ...                                  container=portal, 
    ...                                  id="atomic", 
    ...                                  title=u"Atomic Content", 
    ...                                  description=u"A collection of atomic content.")
    
    >>> from plone.testing.z2 import Browser
    >>> browser = Browser(app)
    >>> from plone.app.testing import SITE_OWNER_NAME, SITE_OWNER_PASSWORD
    >>> browser.addHeader('Authorization', 'Basic %s:%s' % (SITE_OWNER_NAME, SITE_OWNER_PASSWORD,))

Site-wide syndication
=====================

    >>> portalURL = portal.absolute_url()
    >>> browser.open(portalURL+'/atom.xml')
    >>> browser.url
    'http://nohost/plone/atom.xml'
    >>> browser.headers["Content-type"]
    'application/atom+xml;charset=utf-8'
    >>> u'<title>Plone site</title>' in browser.contents
    True

Drop-in replacement for RSS syndication
=======================================

    >>> atomicURL = atomic.absolute_url()
    >>> browser.open(atomicURL+'/atom.xml')
    >>> browser.url
    'http://nohost/plone/atomic/atom.xml'
    >>> browser.headers["Content-type"]
    'application/atom+xml;charset=utf-8'
    >>> u'<title>Atomic Content</title>' in browser.contents
    True
